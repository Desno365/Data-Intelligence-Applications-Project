\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{mathtools}
\usepackage{amsmath}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\begin{document}

The problem that we need to solve is to find the bid for each category that maximize the difference between the expected gain (the value per activation $v$ times the expected number of activations) and the expected cost (the price per click $p$ times the expected number of seeds)
\[\max_{b_j} v_jE[activations_j] - p_j(b_j)E[seeds]\]
The expected number of seeds can be also written as:
$$E[seeds] = \sum_{i=1}^{N}c_{i,j}$$
\[ \begin{cases}
      c_{i,j} \sim Bernoulli(\lambda) & i=j \\
      c_{i,j}=0 & i \neq j
   \end{cases}
\]
since the variable $c_{i,j}$ is draw from a Bernoulli distribution of parameter $\lambda$, that is the click probability, and so it will be 1 if the node clicked and 0 if it didn't, but it will be always zero if the node's category is not the same of the campaign (since they can't be seeds fot that campaign).
We can rewrite it in a better way as:
$$E[seeds] = \sum_{i=1}^{N}c_{i,j}C_{i,j}$$
where
$$c_{i,j} \sim Bernoulli(\lambda_j)$$
\[ C_{i,j} = \begin{cases}
      1 & $if $ i = j \\
      0 & $if $ i \neq j
   \end{cases}
\]
The parameter $\lambda_j$ depends on the position of the ad in the slate. It is build in decreasing order of quality times value of each ad ($q_av_a$). So, we have that $\lambda_j$ is such that:
$$\lambda_j = \prod_{\text{a in }\Bar{A_j}}\Lambda_{s(a)}q_a$$
$$\Bar{A_j} = \{ \text{a in A } \vert q_av_a \geq q_jv_j \}$$
This is a slightly pessimistic formulation since it assume that if the ad has the same quality times value of another advertiser campaign, it will be placed after him in the slate. Since the disposition in the slate is decided by the auctioneer, and the value of a campaign is a private information of the advertiser, the position in the slate and so the parameter $lambda$ is usually estimated using the bids instead of the values. In particular, the bids of the other advertiser are draw from a discrete uniform distribution over the pool of possible bids (AAA non ha una notazione).
\newline

The price per click is determined using VCG where, for the same reasons of parameter $lambda$, the bids are often used instead of the value. \newline
If we assume that the 5 advertise campaign are indipendent, the bids and the expected number of activations and seeds will be indipendents among different categories, and so the sum of the maximization of the five marginal gain will be equal to the maximization of the sum:
$$\max_{b=[b_1,..b_N]} \sum_{j=1}^{M} v_jE[activations_j] - \sum_{i=1}^{N}p_{i,j}(b_j)c_{i,j}C_{i,j}$$

------ \\
N: \#nodes \\
M: \# campaigns \\
$c_{i,j}$: variabile aleatoria di una bernoulli. 1 se scelto, 0 altrimenti \\
$C_{i,j}$ mask for class j of node i \\
$v_j$ : value of campaign j
$q_j$ : quality of campaign j
A: set of all the ad competing for a campaign


